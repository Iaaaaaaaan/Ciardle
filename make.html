<!DOCTYPE html>
<html>
<head>
<title>Image Cropper</title>
<style>
body { margin: 0; }
canvas { display: block; }
#controls {
  margin-bottom: 10px;
}
#croppedImage {  /* Style for the cropped image display */
  margin-top: 10px;
  max-width: 100%; /* Prevent image from overflowing its container */
  height: auto;
}
</style>
</head>
<body>

<div id="controls">
  Image URL: <input type="text" id="imageURL" value="https://via.placeholder.com/600x400" size="50">
  <button onclick="loadImage()">Load Image</button>
  <button onclick="cropImage()">Crop and Save</button>
</div>

<canvas id="imageCanvas"></canvas>
<div id="croppedImageContainer"> <img id="croppedImage" alt="Cropped Image"> </div>

<script>
// ... (Previous code for image loading and rectangle drawing) ...

function cropImage() {
  // ... (Previous code for getting width, height, actualX, actualY) ...

  croppedCtx.drawImage(img, actualX, actualY, width, height, 0, 0, width, height);

  // Display the cropped image
  const croppedImage = document.getElementById('croppedImage');
  croppedCanvas.toBlob((blob) => {
      const imageUrl = URL.createObjectURL(blob); // Create URL for the blob
      croppedImage.src = imageUrl; // Set the src of the image element
      // No need to create a download link anymore, since we're displaying it
  });
}

// ... (Rest of the previous code) ...

</script>

</body>
</html>